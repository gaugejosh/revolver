/*
 * jQuery My Carousel Plugin v1.0
 * Copyright (C) 2012 Taraprasad Swain
 * Author URL: http://www.taraprasad.com
 * Plugin URL: http://www.taraprasad.com/wordpress/carousel
 */

(function(e){e.fn.mycarousel=function(t){var n=e(this),r,i=false,s=0,o=1,u=0,a=e.fn.mycarousel,f=a.defaults,l=e.extend({},f,t),c=function(){if(l["prev"]!=""){if(l["autoAlignNav"]){if(l["direction"]=="left"||l["direction"]=="right"){e(l["prev"]).css({position:"absolute",left:n.parent().position().left-e(l["prev"]).width(),top:n.parent().position().top+n.parent().height()/2-e(l["prev"]).height()/2})}else if(l["direction"]=="up"||l["direction"]=="down"){e(l["prev"]).css({position:"absolute",left:n.parent().position().left+n.parent().width()/2-e(l["prev"]).width()/2,top:n.parent().position().top-e(l["prev"]).height()})}}}if(l["next"]!=""){if(l["autoAlignNav"]){if(l["direction"]=="left"||l["direction"]=="right"){e(l["next"]).css({position:"absolute",left:n.parent().position().left+n.parent().width(),top:n.parent().position().top+n.parent().height()/2-e(l["next"]).height()/2})}else if(l["direction"]=="up"||l["direction"]=="down"){e(l["next"]).css({position:"absolute",left:n.parent().position().left+n.parent().width()/2-e(l["prev"]).width()/2,top:n.parent().position().top+n.parent().height()})}}}if(l["visible"]){o=Math.ceil(n.children().length/2/l["visible"])}else{o=Math.ceil(n.width()/2/n.parent().width())}s=n.children().length/2/o;if(l["paging"]!=""){if(l["direction"]=="up"||l["direction"]=="down"){e(l["paging"]).css({"margin-top":e(l["next"]).height()})}e(l["paging"]).html("");for(m=0;m<o;m++){var t=e('<a href="#"><span>'+(m+1)+"</span></a>").click(function(t){t.preventDefault();x(e(this).index())});e(l["paging"]).append(t)}O()}},h=function(){return;n.children().each(function(){e(this).css({"float":"left",position:"relative",top:0})})},d=function(){if(l["visible"]){var e=Number(n.find("div:first").css("margin-left").replace("px",""));e+=Number(n.find("div:first").css("margin-right").replace("px",""));var t=n.parent().outerWidth(true)/l["visible"];var r=Math.ceil(n.children().length*t)}else{var r=n.children().length*n.find("div:first").outerWidth(true)}n.width(r)},v=function(){if(!r.is(":visible")){setTimeout(function(){y();v()},500)}else{setTimeout(function(){y()},200)}},g=function(){n.find(">div").width(l["itemWidth"]).css({visibility:"visible"});n.wrap('<div class="mycarousel_wrapper"></div>').show();if(l["slideMargin"]&&l["slideMargin"]!=""){n.find(">div").css({margin:l["slideMargin"]})}r=n.parent();r.find(".mycarousel:first").append(r.find(".mycarousel:first").html());d();h();c();v();if(l["prev"]!=""){e(l["prev"]).click(function(t){t.preventDefault();if(e(l["prev"]).hasClass("disabled"))return;S()})}if(l["next"]!=""){e(l["next"]).click(function(t){t.preventDefault();if(e(l["next"]).hasClass("disabled"))return;E()})}if(l["mouseWheel"]){n.parent().bind("mousewheel",function(e,t){if(t>0){S()}else{E()}})}if(l["swipe"]){n.parent().swipe({swipeLeft:function(e,t,n,r,i){E()},swipeRight:function(e,t,n,r,i){S()},allowPageScroll:"vertical"})}if(l["keys"]){e("body").keyup(function(e){if(e.keyCode==49){x(0)}else if(e.keyCode==50){x(1)}else if(e.keyCode==51){x(2)}else if(e.keyCode==52){x(3)}else if(e.keyCode==53){x(4)}else if(e.keyCode==54){x(5)}else if(e.keyCode==55){x(6)}else if(e.keyCode==56){x(7)}else if(e.keyCode==57){x(8)}else if(e.keyCode==58){x(9)}else if(e.keyCode==37){S()}else if(e.keyCode==39){E()}else if(e.keyCode==38){S()}else if(e.keyCode==40){E()}})}},y=function(){if(l["visible"]){var e=Number(n.find("div:first").css("margin-left").replace("px",""));e+=Number(n.find("div:first").css("margin-right").replace("px",""));n.find(">div").width(n.parent().outerWidth(true)/l["visible"]-e)}d();A();c();x(u)},b=function(){if(l["auto"]){setInterval(function(){if(l["pauseOver"]){if(!n.parent().is(":hover")){w()}}else{w()}},l["pauseTime"])}},w=function(){if(l["direction"]=="left"||l["direction"]=="down"){E()}else if(l["direction"]=="right"||l["direction"]=="up"){S()}},E=function(){if(i)return;p=u+1;if(p>=o){x(0)}else{x(p)}},S=function(){if(i)return;p=u-1;if(p<0){x(o-1)}else{x(p)}},x=function(e){if(e>=o){x(0);return}else if(e<0){x(o-1);return}u=e;if(l["effect"]=="slide"){if(l["direction"]=="left"||l["direction"]=="right"){L()}else if(l["direction"]=="up"||l["direction"]=="down"){k()}}else if(l["effect"]=="fade"){N()}},T=function(){var e=u*n.parent().outerWidth(true);if(u==o-1){var t=n.outerWidth(true)/2%n.parent().outerWidth(true);if(t>0){e=(u-1)*n.parent().outerWidth(true)+t}}return e},N=function(){var e=T();O();i=true;var t=n.clone().css({position:"absolute",display:"none",zIndex:0,left:-e,top:n.position().top}).appendTo(n.parent());t.fadeIn(l["easingTime"],l["easing"],function(){n.css({left:-e});t.remove();i=false})},C=function(){var e=T();O();i=true;var t=n.clone().css({position:"absolute",zIndex:0,left:n.position().left,top:n.position().top}).appendTo(n.parent());n.css({left:-e});t.fadeOut(l["easingTime"],l["easing"],function(){t.remove();i=false})},k=function(){var e=T();O();i=true;if(l["direction"]=="up"){if(-e<n.position().left){var t=1}else{var t=-1}}else if(l["direction"]=="down"){if(-e<n.position().left){var t=-1}else{var t=1}}var r=n.clone().css({position:"absolute",zIndex:0,left:-e,top:n.position().top+n.parent().outerHeight(true)*t}).appendTo(n.parent());r.stop(true,true).animate({top:n.position().top},l["easingTime"],l["easing"],function(){n.css({left:-e});r.remove();i=false})},L=function(){var e=T();O();i=true;n.stop(true,true).animate({left:-e},l["easingTime"],l["easing"],function(){i=false});A()},A=function(){if(!l["autoHeight"]){n.parent().css({height:n.height()});return}var e=Math.floor(u*s-s+1);var t=n.find(">div:eq("+e+")").outerHeight(true);n.parent().stop(true,true).animate({height:t},700,"swing",function(){c()})},O=function(){if(l["paging"]!=""){e(l["paging"]).find("a").removeClass("selected");e(l["paging"]).find("a:eq("+u+")").addClass("selected")}if(l["next"]!=""){if(!l["circular"]){if(u==o-1){e(l["next"]).addClass("disabled")}else if(e(l["next"]).hasClass("disabled")){e(l["next"]).removeClass("disabled")}}}if(l["prev"]!=""){if(!l["circular"]){if(u==0){e(l["prev"]).addClass("disabled")}else if(e(l["prev"]).hasClass("disabled")){e(l["prev"]).removeClass("disabled")}}}};e(window).resize(function(){y()});n.imagesLoaded(function(){g();y();b()})};var t=e.fn.mycarousel;t.defaults={direction:"left",effect:"slide",itemWidth:200,auto:false,autoHeight:false,easing:"swing",easingTime:700,pauseTime:1e3,pauseOver:false,next:"",prev:"",paging:"",autoAlignNav:false,circular:false,mouseWheel:false,swipe:false,keys:false}})(jQuery)